{% extends "core/base.html" %}
{% load static %}
{% block content %}

<div class="container py-4">
  <h2>Manage Lessons for "{{ course.title }}"</h2>

  <!-- Success / Info Messages -->
  {% if messages %}
    {% for message in messages %}
      <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  <!-- Add Lesson Button -->
  <div class="mb-3">
    <a href="{% url 'instructors:add_lesson' course.slug %}" class="btn btn-primary">Add New Lesson</a>
    <a href="{% url 'instructors:dashboard' %}" class="btn btn-secondary">Back to Dashboard</a>
  </div>

  <!-- Lessons Table -->
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Order</th>
        <th>Title</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for lesson in course.lessons.all %}
        <tr>
          <td>{{ lesson.order }}</td>
          <td>{{ lesson.title }}</td>
          <td>
            <a href="{% url 'instructors:edit_lesson' lesson.id %}" class="btn btn-sm btn-warning">Edit</a>
            <form method="post" action="{% url 'instructors:delete_lesson' lesson.id %}" style="display:inline-block;">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this lesson?');">Delete</button>
            </form>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="3" class="text-muted">No lessons added yet.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
