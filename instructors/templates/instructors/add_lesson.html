{% extends "core/base.html" %}
{% load static %}
{% block content %}

<div class="container py-4">
  <h2>Add Lesson to {{ course.title }}</h2>

  <!-- Success / Info Messages -->
  {% if messages %}
    {% for message in messages %}
      <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  <!-- Lesson Form -->
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Display non-field errors -->
    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        <ul class="mb-0">
          {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    <!-- Title Field -->
    <div class="mb-3">
      <label for="{{ form.title.id_for_label }}" class="form-label">{{ form.title.label }}</label>
      {{ form.title }}
      {% for error in form.title.errors %}
        <div class="text-danger small">{{ error }}</div>
      {% endfor %}
    </div>

    <!-- Content Field -->
    <div class="mb-3">
      <label for="{{ form.content.id_for_label }}" class="form-label">{{ form.content.label }}</label>
      {{ form.content }}
      {% for error in form.content.errors %}
        <div class="text-danger small">{{ error }}</div>
      {% endfor %}
    </div>

    <!-- Video URL Field -->
    <div class="mb-3">
      <label for="{{ form.video_url.id_for_label }}" class="form-label">{{ form.video_url.label }}</label>
      {{ form.video_url }}
      {% for error in form.video_url.errors %}
        <div class="text-danger small">{{ error }}</div>
      {% endfor %}
    </div>

    <button type="submit" class="btn btn-primary">Save Lesson</button>
  </form>
</div>

{% endblock %}
